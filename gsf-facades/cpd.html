<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Aug 23, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>FatWire GSF: ContentServer Library Facades - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120823" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                FatWire GSF: ContentServer Library Facades
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-08-23</span>
                  &nbsp;| <span id="projectVersion">Version: 11.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                              <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                      <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD Report">PMD Report</a>
            </li>
                      <li class="none">
            <strong>CPD Report</strong>
          </li>
                      <li class="none">
                          <a href="xref/index.html" title="Source Xref">Source Xref</a>
            </li>
                      <li class="none">
                          <a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a>
            </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.2.5.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/runtag/xlat/Lookup.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/xlat/Lookup.html#61">61</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/runtag/xlat/Stream.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/xlat/Stream.html#48">48</a></td></tr><tr class="b"><td colspan='2'><div><pre>        this.set(&quot;KEY&quot;, s);
    }

    /**
     * Sets locale to the value of &lt;code&gt;s&lt;/code&gt;
     * 
     * @param s The locale of the db entry
     */
    public void setLocale(String s) {
        // validate first
        if (s == null || s.length() == 0) {
            throw new IllegalArgumentException(&quot;Invalid locale string: &quot; + s);
        }
        this.set(&quot;LOCALE&quot;, s);
    }

    /**
     * Sets encode to the value of &lt;code&gt;s&lt;/code&gt;
     * 
     * @param s true or false (case sensitive)
     */
    public void setEncode(String s) {
        // validate first
        if (s == null || s.length() == 0 || !s.equals(&quot;true&quot;) &amp;&amp; !s.equals(&quot;false&quot;)) {
            throw new IllegalArgumentException(&quot;Invalid encode string: &quot; + s);
        }
        this.set(&quot;ENCODE&quot;, s);
    }

    /**
     * Sets escape to the value of &lt;code&gt;s&lt;/code&gt;
     * 
     * @param s true or false (case sensitive)
     */
    public void setEscape(String s) {
        // validate first
        if (s == null || s.length() == 0 || !s.equals(&quot;true&quot;) &amp;&amp; !s.equals(&quot;false&quot;)) {
            throw new IllegalArgumentException(&quot;Invalid escape string: &quot; + s);
        }
        this.set(&quot;ESCAPE&quot;, s);
    }

    /**
     * Sets evalall to the value of &lt;code&gt;s&lt;/code&gt;
     * 
     * @param s true or false (case sensitive)
     */
    public void setEvalAll(String s) {
        // validate first
        if (s == null || s.length() == 0 || !s.equals(&quot;true&quot;) &amp;&amp; !s.equals(&quot;false&quot;)) {
            throw new IllegalArgumentException(&quot;Invalid evalall string: &quot; + s);
        }
        this.set(&quot;EVALALL&quot;, s);
    }

    /**
     * Sets the name and value of a custome argument to
     * &lt;code&gt;argname=argvalue&lt;/code&gt;
     * 
     * @param argname The name of the argument
     * @param argvalue The name of the value
     */
    public void setArgument(String argname, String argvalue) {
        // validate first
        if (argname == null || argname.length() == 0) {
            throw new IllegalArgumentException(&quot;Invalid argname string: &quot; + argname);
        }
        if (argvalue == null || argvalue.length() == 0) {
            throw new IllegalArgumentException(&quot;Invalid argvalue string: &quot; + argvalue);
        }
        this.set(argname, argvalue);
    }

    protected void preExecute(ICS ics) {
        // work around a bug in the tag where a variable needs to exist for the
        // mapping to work
        super.preExecute(ics);

        List&lt;String&gt; newVars = new ArrayList&lt;String&gt;();
        for (Object oKey : list.keySet()) {
            String sKey = (String) oKey;
            if (ics.GetVar(sKey) == null) {
                newVars.add(sKey);
                ics.SetVar(sKey, list.getValString(sKey));
            }
        }
        ics.SetObj(&quot;NewVars&quot;, newVars);
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    protected void postExecute(ICS ics) {
        super.postExecute(ics);
        List&lt;String&gt; newVars = (List&lt;String&gt;) ics.GetObj(&quot;NewVars&quot;);
        for (String toRemove : newVars) {
            ics.RemoveVar(toRemove);
        }
        ics.SetObj(&quot;NewVars&quot;, null);
    }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/runtag/AbstractTagRunner.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/AbstractTagRunner.html#84">84</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/runtag/AbstractTagRunner.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/AbstractTagRunner.html#108">108</a></td></tr><tr class="b"><td colspan='2'><div><pre>            StringBuffer sb = new StringBuffer(&quot;Just completed execution of runTag for tag: &quot; + tagName + &quot;.  &quot;);
            sb.append(&quot;\nInput param list:&quot;);
            for (Object k : list.keySet()) {
                String key = (String) k;
                sb.append(&quot;\n\t&quot;).append(key).append(&quot;=&quot;)
                        .append(isPW(key) ? &quot;&lt;password suppressed&gt;&quot; : list.getValString(key));
            }
            sb.append(&quot;\nVariables:&quot;);
            Enumeration&lt;?&gt; e = ics.GetVars();
            while (e.hasMoreElements()) {
                String key = (String) e.nextElement();
                sb.append(&quot;\n\t&quot;).append(key).append(&quot;=&quot;).append(isPW(key) ? &quot;&lt;password suppressed&gt;&quot; : ics.GetVar(key));
            }
            sb.append(&quot;\nSession Variables:&quot;);
            e = ics.GetSSVars();
            while (e.hasMoreElements()) {
                String key = (String) e.nextElement();
                sb.append(&quot;\n\t&quot;).append(key).append(&quot;=&quot;)
                        .append(isPW(key) ? &quot;&lt;password suppressed&gt;&quot; : ics.GetSSVar(key));
            }
            LOG.trace(sb);
        }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/runtag/siteplan/ListPages.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/siteplan/ListPages.html#75">75</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/runtag/siteplan/NodePath.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/siteplan/NodePath.html#101">101</a></td></tr><tr class="b"><td colspan='2'><div><pre>        try {
            AssetLoadById assetLoad = new AssetLoadById();
            assetLoad.setAssetId(p);
            assetLoad.setAssetType(&quot;Page&quot;);
            assetLoad.setName(LOADED_PAGE_NAME);
            assetLoad.execute(ics);
            if (ics.GetErrno() &lt; 0) {
                throw new CSRuntimeException(&quot;Failed to load page identified by Page:&quot; + p, ics.GetErrno());
            }

            GetSiteNode getSiteNode = new GetSiteNode();
            getSiteNode.setName(LOADED_PAGE_NAME);
            getSiteNode.setOutput(CURRENT_PAGE_NODE_ID);
            getSiteNode.execute(ics);
            if (ics.GetErrno() &lt; 0) {
                throw new CSRuntimeException(&quot;Could not get site node for page identified by Page:&quot; + p, ics.GetErrno());
            }

            SitePlanLoad sitePlanLoad = new SitePlanLoad();
            sitePlanLoad.setName(LOADED_SITE_PLAN_NODE);
            sitePlanLoad.setNodeid(ics.GetVar(CURRENT_PAGE_NODE_ID));
            sitePlanLoad.execute(ics);
            if (ics.GetErrno() &lt; 0) {
                throw new CSRuntimeException(&quot;Could not load site plan tree for page identified by Page:&quot; + p,
                        ics.GetErrno());
            }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/assetapi/asset/ScatteredAsset.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/assetapi/asset/ScatteredAsset.html#182">182</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/assetapi/asset/ScatteredAsset.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/assetapi/asset/ScatteredAsset.html#258">258</a></td></tr><tr class="b"><td colspan='2'><div><pre>                    attrMap.put(name, obj);
                break;
            }

            case ARRAY:
            case STRUCT:
            case LIST:
            case ONEOF:
                Object o = attr.getData();
                int size = 0;
                if (o instanceof Collection&lt;?&gt;) {
                    size = ((Collection&lt;?&gt;) o).size();
                } else if (o instanceof Map&lt;?, ?&gt;) {
                    size = ((Map&lt;?, ?&gt;) o).size();
                } else {
                    log.debug(&quot;Attribute '&quot; + name + &quot;' of type  &quot; + attr.getType() + &quot; returned a &quot;
                            + o.getClass().getName());
                    size = 1;
                }
                if (size &gt; 0)
                    attrMap.put(name, attr.getData());
        }
    }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/assetapi/code/CodeGen.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/assetapi/code/CodeGen.html#78">78</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/assetapi/code/CodeGen.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/assetapi/code/CodeGen.html#185">185</a></td></tr><tr class="b"><td colspan='2'><div><pre>            out.print(def.getName() + &quot;/&quot; + s + &quot;Detail&quot;);
            out.print(&quot;   // description: '&quot; + def.getDescription() + &quot;'&quot;);
            out.print(&quot; plural: '&quot; + def.getPlural() + &quot;'&quot;);
            out.print(&quot; canbechild: &quot; + def.getCanBeChild() + &quot;&quot;);
            AssetTypeDefProperties p = def.getProperties();
            out.print(&quot; canAddSubtypes: &quot; + p.getCanAddSubtypes());
            String type = p.getIsAssetmakerAsset() ? &quot;AssetmakerAsset&quot; : &quot;Unknown Type&quot;;
            if (p.getIsCoreAsset())
                type = &quot;CoreAsset&quot;;
            if (p.getIsFlexAsset())
                type = &quot;FlexAsset&quot;;
            out.print(&quot; type: '&quot; + type + &quot;'&quot;);
            out.println(&quot; nameMustUnique: &quot; + p.getIsNameMustUnique());

            printAttributes(def);</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/runtag/asset/Children.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/asset/Children.html#95">95</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/runtag/asset/Children.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/asset/Children.html#128">128</a></td></tr><tr class="b"><td colspan='2'><div><pre>    public static AssetId getOptionalSingleAssociation(ICS ics, String c, String cid, String code) {
        ics.RegisterList(&quot;spu-kids&quot;, null);
        Children ac = new Children();
        ac.setType(c);
        ac.setAssetId(cid);
        ac.setCode(code);
        ac.setList(&quot;spu-kids&quot;);
        ac.execute(ics);
        IList spukids = ics.GetList(&quot;spu-kids&quot;);
        ics.RegisterList(&quot;spu-kids&quot;, null);
        if (spukids != null &amp;&amp; spukids.hasData()) {
            if (spukids.numRows() &gt; 1) {
                throw new IllegalStateException(&quot;Too many kids found associated to: &quot; + c + &quot;:&quot; + cid
                        + &quot; for association:&quot; + code + &quot;.  expected 0 or 1 but got &quot; + spukids.numRows());</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/runtag/render/GetBlobUrl.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/render/GetBlobUrl.html#62">62</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/runtag/render/GetTemplateUrl.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/render/GetTemplateUrl.html#57">57</a></td></tr><tr class="b"><td colspan='2'><div><pre>        super(&quot;RENDER.GETTEMPLATEURL&quot;);
    }

    /**
     * @param s
     */
    public void setAsset(String s) {
        set(&quot;ASSET&quot;, s);
    }

    /**
     * @param b
     */
    public void setAddSession(boolean b) {
        set(&quot;ADDSESSION&quot;, b ? &quot;TRUE&quot; : &quot;FALSE&quot;);
    }

    /**
     * @param s
     */
    public void setAssembler(String s) {
        set(&quot;ASSEMBLER&quot;, s);
    }

    /**
     * @param s
     */
    public void setAuthority(String s) {
        set(&quot;AUTHORITY&quot;, s);
    }

    /**
     * @param s
     */
    public void setC(String s) {
        set(&quot;C&quot;, s);
    }

    /**
     * @param s
     */
    public void setCid(String s) {
        set(&quot;CID&quot;, s);
    }

    /**
     * @param s
     */
    public void setContainer(String s) {
        set(&quot;CONTAINER&quot;, s);
    }

    /**
     * @param s
     */
    public void setContext(String s) {</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/runtag/asset/AssetList.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/asset/AssetList.html#159">159</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/runtag/asset/AssetList.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/runtag/asset/AssetList.html#185">185</a></td></tr><tr class="b"><td colspan='2'><div><pre>    public static IList listSingleAsset(ICS ics, String c, String cid) {
        ics.RegisterList(&quot;spu-gtfa&quot;, null);
        AssetList al = new AssetList();
        al.setField(&quot;id&quot;, cid);
        al.setType(c);
        al.setExcludeVoided(true);
        al.setList(&quot;spu-gtfa&quot;);
        al.execute(ics);
        IList spugtfa = ics.GetList(&quot;spu-gtfa&quot;);
        ics.RegisterList(&quot;spu-gtfa&quot;, null);
        if (spugtfa != null &amp;&amp; spugtfa.hasData()) {
            if (spugtfa.numRows() &gt; 1) {
                throw new IllegalStateException(&quot;ASSET.LIST failed for &quot; + c + &quot;:&quot; + cid + &quot;: multiple matches found:&quot;
                        + spugtfa.numRows());
            }</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/fatwire/gst/foundation/facade/assetapi/AssetAccessTemplate.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/assetapi/AssetAccessTemplate.html#302">302</a></td></tr><tr class="a"><td>com/fatwire/gst/foundation/facade/assetapi/AssetAccessTemplate.java</td><td><a href="./xref/com/fatwire/gst/foundation/facade/assetapi/AssetAccessTemplate.html#344">344</a></td></tr><tr class="b"><td colspan='2'><div><pre>            assets = m.read(Collections.singletonList(id));
        } catch (final AssetAccessException e) {
            throw new RuntimeAssetAccessException(e);
        }
        if (assets == null) {
            return null;
        }
        if (assets instanceof List&lt;?&gt;) {
            final List&lt;AssetData&gt; x = (List&lt;AssetData&gt;) assets;
            if (x.isEmpty()) {
                return null;
            } else {
                return x.get(0);
            }
        }
        final Iterator&lt;AssetData&gt; i = assets.iterator();
        if (i.hasNext()) {
            return i.next();
        }
        return null;
    }</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2008-2012
                        <a href="http://www.fatwire.com">FatWire</a>.
            All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
